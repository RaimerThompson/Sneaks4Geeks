<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Karla:wght@400;500;600;700&family=Lato:wght@100;400;700;900&family=Montserrat:wght@200;300;400;500;600;700;800;900&family=Nothing+You+Could+Do&family=Outfit:wght@400;500;600&family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="stylesheet" href="styles/components/header.css">
  <link rel="stylesheet" href="styles/components/hero.css">
  <link rel="stylesheet" href="styles/components/banner.css">
  <link rel="stylesheet" href="styles/components/checkout.css">
  <link rel="stylesheet" href="styles/components/contact.css">
  <link rel="stylesheet" href="styles/components/footer.css">
  <link rel="stylesheet" href="styles/utilities.css">
  <script src="https://kit.fontawesome.com/c339e0fb63.js" crossorigin="anonymous"></script>
  
  <title>Sneaks 4 Geeks</title>
</head>
<body>
  <!-- Header Begins-->
  <header class="header container">
    <nav id="nav">
      <ul class="header__menu-logo">
        <li>
          <a class="header__logo" href="">Sneaks<span class="logo__number4">4</span>Geeks</a>
        </li>
      </ul>
      <ul id="navbar" class="header__menu">
        <li class="header__link"><a class="active" href="#">Home</a></li>
        <li class="header__link"><a href="#">Sneaks</a></li>
        <li class="header__link"><a href="#">Deals</a></li>
        <li class="header__link"><a href="#">About</a></li>
      </ul>
      <ul class="header__menu-right">
        <li class="header__link-right">
          <!-- <i class="fa-regular fa-user"></i> -->

          <i class="fa-solid fa-magnifying-glass header__search-icon"></i>
         
          <div class="header__cart" href=""> <i class="fa-solid fa-bag-shopping fa-lg "></i></div>
        </li>
        <div id="mobile">
          <!-- <div class="header__cart" href=""> <i class="fa-solid fa-bag-shopping fa-lg mobile__cart-fa"></i> Cart <span class="header__cart-span">0</span></div> -->
          <div class="hamburger__menu-btn">
            <button class="hamburger__btn" aria-controls="primary-navigation" aria-expanded="false">
              <svg class="hamburger" viewBox="0 0 100 100" width="250">
                <rect class="top line" 
                width="80" height="10" 
                x="10" y="15" rx="3.5">
              </rect>
                <rect class="middle line"
                 width="80" height="10" 
                 x="10" y="45" rx="3.5">
                </rect>
                <rect class="bottom line" 
                width="80" height="10" 
                x="10" y="75" rx="3.5">
              </rect>
              </svg>
            </button>
          </div>
        </div>
      </ul>

      
        <div class="search__container">
          <form>
            <i class="fa-solid fa-magnifying-glass search__icon"></i>
            <input type="text" id="search__item" class="search__input" placeholder="Search our shop" onkeyup="search()">
            <i class="fa-solid fa-xmark search__icon-close"></i>
          </form>
        </div>
      <div class=".cart__box">

      </div>

      <div id="cart__menu">
        <h2 class="cart__title">Your Cart</h2>
        <i class="fa-solid fa-arrow-right-long close__cart"></i>
        <div class="cart__content">
          <!-- <div class="cart__box">
            <img src="images/Nike-sneaks/nike101/nike101.webp" alt="" class="cart__img">
            <div class="details__box">
              <div class="cart__title-name">nike dunk low</div>
              <div class="cart__item-price">$10.07</div>
              <input type="number" value="1" class="cart__quantity">
            </div>
            <i class="fa-solid fa-trash-can item__remove"></i>
          </div> -->
          
        </div>
        <div class="total">
          <div class="total__title">Total</div>
          <div class="total__price">$0</div>
        </div>
        <div class="checkout__btn-div">
           <button class="checkout__btn btn">CHECK OUT</button>
        </div>
       
      
      </div>
      
    </nav>
    
  </header>
<!-- Header Ends-->
  <main>
<!-- Hero Begins-->   
  <section class="hero section container">

    <div class="hero__scroll-container main-scroll-div">
         
      <div class="hero__scroll-banner cover">
       <div class="hero__scroll-div scroll-images">
      
        <div class="mySlides slide1">
          <img class="child-img" src="images/Nike-sneaks/New-balance-nyc-banner101.jpg" alt="">
        </div>
        <div class="mySlides slide2">
          <img class="child-img" src="images/Nike-sneaks/nike-dunks-nyc-banner101.jpg" alt="">
        </div>
        <div class="mySlides slide3">
          <img class="child-img" src="images/Nike-in-the-woods-jordan1s.jpg" alt="">
        </div>
      </div>
    </div>
   
   </div>
   <div class="hero__nav-button">
    <div id="backBtn" onclick="plusSlides(-1)">
    <i class="fa-solid fa-chevron-left"></i>
    </div> 
    <div id="nextBtn" onclick="plusSlides(1)">
      <i class="fa-solid fa-chevron-right"></i>
    </div> 
   </div>
    </section>
<!-- Hero Ends-->


    <div class="hero__new-release-container">
      <h2 class="hero__subtitle">NEW RELEASES</h2>
      <div class="hero__button-wrapper">
        <button class="hero__button btn">SEE ALL</button>
      </div>
    </div>
    <section id="product" >
      <div class="product__container" id="product__list">
        <div data-id="1" class="pro1">
          <img src="images/nike-sneaks/nike101/nike101.webp" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike101/nike102.webp'" onmouseout="src='images/nike-sneaks/nike101/nike101.webp'">
          <span class="brand">Nike</span>
          <p class="pro__name">Nike Dunk Low</p>
          <p class="pro__price">$109.95</p>
          <i class="fa-solid fa-cart-shopping add__cart"></i>
        </div>

        <div data-id="2" class="pro1">
          <img src="images/Adi-sneaks/adi201/adi201.webp" class="pro__img" alt="" onmouseover="src='images/Adi-sneaks/adi201/adi202.webp'" onmouseout="src='images/Adi-sneaks/adi201/adi201.webp'">
          <span class="brand">Adidas</span>
          <p class="pro__name">Adidas Beige Samba</p>
          <p class="pro__price">$99.95</p>
          <i class="fa-solid fa-cart-shopping add__cart"></i>
        </div>
      
      <div data-id="3" class="pro1">
        <img src="images/nike-sneaks/nike301/nike301.webp" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike301/nike302.webp'" onmouseout="src='images/nike-sneaks/nike301/nike301.webp'">
        <span class="brand">Nike</span>
        <p class="pro__name">Nike Air Max 1</p>
        <p class="pro__price">$140.00</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>

      <div data-id="4" class="pro1">
        <img src="images/nb-sneaks/nb101/nb101.webp" class="pro__img" alt="" onmouseover="src='images/nb-sneaks/nb101/nb102.webp'" onmouseout="src='images/nb-sneaks/nb101/nb101.webp'">
        <span class="brand">New Balance</span>
        <p class="pro__name">New Balance 580 v2</p>
        <p class="pro__price">$129.95</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>

      <div data-id="5" class="pro1">
        <img src="images/nike-sneaks/nike201/nike201.webp" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike201/nike202.webp'" onmouseout="src='images/nike-sneaks/nike201/nike201.webp'">
        <span class="brand">Nike</span>
        <p class="pro__name">Nike Blazer Low</p>
        <p class="pro__price">$89.95</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>
      
    </div>
    </section>

    
    <div class="hero__new-release-container hero__exclusive-container">
      <h2 class="hero__subtitle">EXCLUSIVE COLLECTION</h2>
      <div class="hero__button-wrapper">
        <button class="hero__button btn">SEE ALL</button>
      </div>
    </div>
    <section id="product" >
      <div class="product__container" id="product__list">
        
        <div data-id="6" class="pro1">
          <img src="images/nike-sneaks/nike401/nike401.webp" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike401/nike402.webp'" onmouseout="src='images/nike-sneaks/nike401/nike401.webp'">
          <span class="brand">Nike</span>
          <p class="pro__name">Nike Air Max 97 OG</p>
          <p class="pro__price">$185.00</p>
          <i class="fa-solid fa-cart-shopping add__cart"></i>
        </div>
      
      <div data-id="7" class="pro1">
        <img src="images/nike-sneaks/nike601/601.jpg" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike601/602.jpg'" onmouseout="src='images/nike-sneaks/nike601/601.jpg'">
        <span class="brand">Nike</span>
        <p class="pro__name">Nike Air Max 1</p>
        <p class="pro__price">$160.00</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>

      <div data-id="8" class="pro1">
        <img src="images/nike-sneaks/nike1101/1101.webp" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike1101/1104.webp'" onmouseout="src='images/nike-sneaks/nike1101/1101.webp'">
        <span class="brand">Nike</span>
        <p class="pro__name">Nike ACG Watercat Phantom</p>
        <p class="pro__price">$125.00</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>

      <div data-id="9" class="pro1">
        <img src="images/nike-sneaks/nike701/701.webp" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike701/702.jpg'" onmouseout="src='images/nike-sneaks/nike701/701.webp'">
        <span class="brand">Nike</span>
        <p class="pro__name">Nike Air Max 1</p>
        <p class="pro__price">$159.95</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>

      <div data-id="10" class="pro1">
        <img src="images/nike-sneaks/nike801/801.jpg" class="pro__img" alt="" onmouseover="src='images/nike-sneaks/nike801/802.jpg'" onmouseout="src='images/nike-sneaks/nike801/801.jpg'">
        <span class="brand">Nike</span>
        <p class="pro__name">Nike Blazer Mid '77</p>
        <p class="pro__price">$109.95</p>
        <i class="fa-solid fa-cart-shopping add__cart"></i>
      </div>
      
      
    </div>
    </section>
    
  <section id="banner" class="banner__container section container">
    <div class="banner__box">
      <div class="banner banner1">
        <h4>THE NEW YORKER</h4>
        <h2>THE EPITOME OF NYC FOOTWEAR</h2>
        <button class="banner__btn btn">Learn More</button>
      </div>
      <div class="banner banner2">
        <h4>NIKE DEALS</h4>
        <h2>THE CLASSICS JUST GOT BETTER</h2>
        <button class="banner__btn btn">Learn More</button>
      </div>
    </div>
  </section>

   </main>

  <section class="contact section container">
    <div class="contact__left-side">
      <h2>SUBSCRIBE AND SAVE</h2>
      <P>Get <span>10% off</span> for signing up for our newsletter</P>
    </div>
    <div class="contact__right-side">
      <input type="email" value="" placeholder="Enter Email"><button class="btn submit__btn">SUBMIT</button>
    </div>
  </section> 

 
  <footer class="footer section container">
    <div></div>
    <div></div>
    <div></div>
    <div class="footer__copyright copyright">Sneaks4Geeks <span>&copy;</span> 2023 Raimer Thompson </div>
  </footer>

  <script>
    const menuBtn = document.querySelector('.hamburger__btn');
const mobileNav = document.getElementById('navbar');
let menuOpen = false;

menuBtn.addEventListener('click', () => {
  if (!menuOpen) {
    menuBtn.classList.add('close');
    menuOpen = true;
    mobileNav.style.display = 'flex';
    mobileNav.classList.add('active');
    
   }else {
    menuBtn.classList.remove('close');
    menuOpen = false;
    mobileNav.style.display = 'flex';
    mobileNav.classList.remove('active');
   }
})
;



//Cart Toggle 
const cartBtn = document.querySelector('.header__cart');
const cart = document.getElementById('cart__menu');
const closeBtn = document.querySelector('.close__cart');
// Declare cartContent once and use it in both event listeners gpt
const cartContent = document.querySelector('.cart__content');

 if (cartBtn){
  cartBtn.addEventListener('click', () => {
    cart.classList.add('active')
  })  
}
if(closeBtn) {    
closeBtn.addEventListener('click', () => {
  cart.classList.remove('active');
})
}

// start cart
if(document.readyState == 'loading'){
  document.addEventListener('DOMContentLoaded', start);
} else {
  start();
}

// start

function start() {
  loadCartItems(); // Load items from localStorage
  update(); // This line should stay as it is
}
//update

function update(){
  addEvents();
  updateTotal();
  saveCartItems();
  loadCartItems();
}


//add events

function addEvents(){
  //remove item from cart
 // Add this code to your addEvents() function
cartContent.addEventListener('click', function (event) {
  if (event.target.classList.contains('item__remove')) {
    handleRemoveCartItems.call(event.target);
  }
});


//item quantity
// Add this code to your addEvents() function
cartContent.addEventListener('change', function (event) {
  if (event.target.classList.contains('cart__quantity')) {
    handleChangeItemQuantity.call(event.target);
  }
});

//add items to the cart
let addCartBtns = document.querySelectorAll('.add__cart');
addCartBtns.forEach(btn =>{
  btn.addEventListener('click', handleAddCartItem);
});
 

//buy order checkout
const buyBtn = document.querySelector('.checkout__btn');
buyBtn.addEventListener('click', handleBuyOrder);

}

//handle
let itemsAdded = [];

function handleAddCartItem() {
  let product = this.parentElement;
  let title = product.querySelector(".pro__name").innerHTML;
  let price = product.querySelector(".pro__price").innerHTML;
  let imgSrc = product.querySelector(".pro__img").src;

  let newToAdd = {
    title,
    price,
    imgSrc,
  };


//if item already in cart
  if(itemsAdded.find((el) => el.title == newToAdd.title)) {
    alert('Item is already in your cart');
    return;
  }else {
    itemsAdded.push(newToAdd);
  }

//add to cart items
  let cartBoxElement = cartBoxComponent(title, price, imgSrc);
  let newNode = document.createElement('div');
  newNode.innerHTML = cartBoxElement;
  const cartContent = cart.querySelector('.cart__content');
  cartContent.appendChild(newNode);

  
  update();
  // saveCartItems();
  
  
}


function handleRemoveCartItems(){
  this.parentElement.remove();
  itemsAdded = itemsAdded.filter(el => el.title != this.parentElement.querySelector('.cart__title-name').innerHTML
  );

  update();
  // saveCartItems();
}

// function handleChangeItemQuantity() {
//   const quantityInput = this;
//   if (isNaN(quantityInput.value) || quantityInput.value < 1) {
//     quantityInput.value = 1;
//   } else if (quantityInput.value % 1 !== 0) {
//     // Ensure the quantity is a whole number
//     quantityInput.value = Math.floor(quantityInput.value);
//   }

//   // Find the cart box that contains the changed quantity input
//   const cartBox = quantityInput.closest('.cart__box');
//   if (!cartBox) return; // If cart box not found, exit

//   const priceElement = cartBox.querySelector('.cart__item-price');
//   if (!priceElement) return; // Check if price element exists
//   const price = parseFloat(priceElement.textContent.replace('$', '')); // Parse the price

//   // Calculate the new total for this item
//   const newTotal = price * quantityInput.value;

//   // Update the item total
//   const itemTotalElement = cartBox.querySelector('.cart__item-total');
//   if (itemTotalElement) {
//     itemTotalElement.textContent = `$${newTotal.toFixed(2)}`;
//   }

//   // Update the cart total
//   updateTotal();
// }

function handleChangeItemQuantity() {
  const quantityInput = this;
  if (isNaN(quantityInput.value) || quantityInput.value < 1) {
    quantityInput.value = 1;
  } else if (quantityInput.value % 1 !== 0) {
    // Ensure the quantity is a whole number
    quantityInput.value = Math.floor(quantityInput.value);
  }

  // Find the cart box that contains the changed quantity input
  const cartBox = quantityInput.closest('.cart__box');
  if (!cartBox) return; // If cart box not found, exit

  const title = cartBox.querySelector('.cart__title-name').textContent;

  // Update the cart total
  updateTotal();

  // Find and update the item in localStorage
  const cartItems = JSON.parse(localStorage.getItem('cartItems'));
  const updatedCartItems = cartItems.map((item) => {
    if (item.title === title) {
      item.quantity = quantityInput.value;
    }
    return item;
  });

  // Save the updated items back to localStorage
  localStorage.setItem('cartItems', JSON.stringify(updatedCartItems));
}



function handleBuyOrder(){
  if(itemsAdded.length <= 0){
    alert('Please add items before checking out. Thank You');
    return;
  }
}

//update function

function updateTotal(){
  let cartBoxes = document.querySelectorAll('.cart__box');
  const totalElement = cart.querySelector('.total__price');
  let total = 0;
  cartBoxes.forEach((cartBox) => {
    let priceElement = cartBox.querySelector('.cart__item-price');
    let price = parseFloat(priceElement.innerHTML.replace('$', ''));
    let quantity = cartBox.querySelector('.cart__quantity').value;
    total += price * quantity;
  });

total = total.toFixed(2); //keep the last 2 digits in price total
// total = Math.round(total * 100) / 100;

  totalElement.innerHTML = '$' + total;

//save total to local storage
localStorage.setItem('cartTotal', total);
}

//html show on cart
function cartBoxComponent(title, price, imgSrc) {
  return  `
  <div class="cart__box">
    <img src=${imgSrc} alt="" class="cart__img">
    <div class="details__box">
      <div class="cart__title-name">${title}</div>
      <div class="cart__item-price">${price}</div>
      <input type="number" value="1" class="cart__quantity">
    </div>

    <i class="fa-solid fa-trash-can item__remove"></i>
  </div>`
}


;

addEvents();
// saveCartItems();

;


//gpt
//keep items in cart when refresh w/ local storage
function saveCartItems() {
  let cartContent = document.querySelector('.cart__content');
  let cartBoxes = cartContent.querySelectorAll('.cart__box');
  let cartItems = [] || JSON.parse(localStorage.getItem('cartItems'));

  cartBoxes.forEach(cartBox => {
    let titleElement = cartBox.querySelector('.cart__title-name');
    let priceElement = cartBox.querySelector('.cart__item-price');
    let quantityElement = cartBox.querySelector('.cart__quantity');
    let productImg = cartBox.querySelector('.cart__img').src;

    let item = {
      title: titleElement.innerText,
      price: priceElement.innerText,
      quantity: quantityElement.value,
      productImg: productImg,
    };

    cartItems.push(item);
  });

  // Save cartItems to localStorage
  localStorage.setItem('cartItems', JSON.stringify(cartItems));
}


//gpt
//loads in cart
function loadCartItems() {
  let cartItems =JSON.parse(localStorage.getItem('cartItems'));
  let cartContent = document.querySelector('.cart__content');

  if (cartItems) {
    let cartItemsHTML = cartItems.map(item => {
      return cartBoxComponent(item.title, item.price, item.productImg, item.quantity);
    });

    cartContent.innerHTML = cartItemsHTML.join('');

    // Update the total based on loaded items
    updateTotal();
  }
}




  </script>
  
</body>

</html>